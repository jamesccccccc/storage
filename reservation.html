<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/all.css">
    <link rel="stylesheet" href="https://unpkg.com/swiper@8/swiper-bundle.min.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&family=Noto+Serif+HK:wght@200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <title>預約派車</title>
</head>
<body>
    <div class="header">
        <div class="navbar navbar-expand-lg">
             <div class="container">
              <span class="navbar-band m-0" id="logo">
                <a href="afterlogin.html"><img class="logo" src="img/logo.png" alt="FUN"></a>
              </span>
              <nav class="navbar">
                <div class="collapse navbar-collapse">
              <ul class="navbar-nav   me-3 mb-lg-0 align-items-center">
                <li><a href="afterlogin.html" class="nav-link px-md-3 fs-5 fw-bold btn-hover">首頁</a></li>
                <li><a href="reservation.html" class="nav-link px-md-3 fs-5 fw-bold btn-hover">預約派車</a></li>
                <li><a href="#" class="logout fw-bold nav-link btn-hover  ms-2">登出</a></li>
                <li><a href="order.html" class="nav-link px-md-3 fs-5 fw-bold  btn-hover"><i class="fa-solid fa-cart-shopping"></i></a></li>
                <li class="userHead ms-3"></li>
              </ul>
             </div>
            </nav>
         </div>
       </div>
      </div>
    <div class="order-content bg-primary2 d-flex flex-column align-items-center justify-content-center">
            <form class="bg-white order">
                <div class="title"><h1 class="fs-3 fw-bold mb-5">請輸入託運資訊</h1></div>
                 <div class="progressbar">
                    <div class="progress" id="progress"></div>
                     <div class="progressbar-step progressbar-step-active" data-name="客戶資料"></div>
                     <div class="progressbar-step" data-name="收件人資料"></div>
                     <div class="progressbar-step" data-name="預約派車"></div>
                 </div>
                 <div class="form-step form-step-active">
               
                      <div class="mb-3 fw-bold">
                        <label for="exampleInputContactphone" class="form-label">連絡電話:</label>
                        <input type="Contactphone" class="customerPhone form-control" id="exampleInputContactphone">
                      </div>
                      <div class="mb-3 fw-bold">
                          <label for="exampleInputMail" class="form-label">Email:</label>
                          <input type="Mail" class="customerMail form-control" id="exampleInputMail">
                      </div>
                      <div class="mb-3 fw-bold">
                          <label for="exampleInputKg" class="form-label">貨物重量</label>
                          <input type="Kg" class="customerWeight form-control" id="exampleInputWeight" placeholder="KG">
                      </div>
                      <div class="mb-3 fw-bold">
                          <label for="exampleInputitems" class="form-label">內裝物品</label>
                          <input type="items" class="customerItems form-control" id="exampleInputItems">
                      </div>
                      <div class="mb-3 fw-bold d-flex flex-column">
                          <label for="remark">備註欄:</label>
                          <textarea id="remark" name="remark"
                                    rows="5" cols="33" class="remark">
                          </textarea>
                      </div>
                      <div class="box d-flex justify-content-between">
                          <button type="submit" class="cancel"><a class="link-white" href="consult.html">取消</a></button>
                          <button type="submit" class="customerBtn Next-Btn">下一步</button>
                      </div>
                 </div>
                 <div class="form-step">
                    <div class="mb-3 fw-bold">
                        <h6 class="fw-bold text-danger">※預約儲位租用則無需填寫</h6>
                        <label for="exampleInputrecipient" class="form-label">收件人名稱:</label>
                        <input type="recipient" class="recipientName form-control" id="exampleInputrecipient" aria-describedby="emailHelp">
                      </div>
                      <div class="mb-3 fw-bold">
                        <label for="exampleInputAddres">收件人電話:</label>
                        <input type="Phone" class="recipientPhone form-control" id="exampleInputPhone">
                      </div>
                      <div class="mb-3 fw-bold">
                          <label for="exampleInputMymail" class="form-label">E-mail</label>
                          <input type="Mail" class="recipientMail form-control" id="exampleInputMymail">
                      </div>
                      <div class="box d-flex justify-content-between mt-5">
                          <button type="submit" class="Previous-Btn">上一步</button>
                          <button type="submit" class="recipient Next-Btn">下一步</button>
                      </div>
                 </div>
                 <div class="form-step">
                    <div class="mb-3 fw-bold">
                    <label  for="date">請輸入派車日期:</label>
                            <input type="date" class="deliveryDate"  id="start" name="trip-start" value="2022" min="2022" max="2030">
                    </div>
                    <div class="mb-3 fw-bold">
                        <label  for="date">請輸入派車時間:</label>
                        <input type="time" class="deliveryTime"> 
                    </div>
                    <div class="mb-3 fw-bold">
                        <label for="pickupArea">請輸入取貨地址:</label>
                        <select id="pickupArea" class="form-select" aria-label="Default select example">
                            <option selected>市區</option>
                            <option value="臺北市">臺北市</option>
                            <option value="新北市">新北市</option>
                            <option value="桃園市">桃園市</option>
                            <option value="新竹市">新竹市</option>
                            <option value="臺中市">臺中市</option>
                            <option value="臺南市">臺南市</option>
                            <option value="高雄市">高雄市</option>
                            <option value="宜蘭縣">宜蘭縣</option>
                            <option value="苗栗縣">苗栗縣</option>
                            <option value="彰化縣">彰化縣</option>
                            <option value="南投縣">南投縣</option>
                            <option value="雲林縣">雲林縣</option>
                            <option value="嘉義縣">嘉義縣</option>
                            <option value="屏東縣">屏東縣</option>
                            <option value="花蓮縣">花蓮縣</option>
                            <option value="臺東縣">臺東縣</option>
                            <option value="澎湖縣">澎湖縣</option>
                        </select>
                        <input type="text" class="pickupAddres form-control mt-3" id="exampleInputAddres" placeholder="地址">
                    </div>
                    <div class="mb-3 fw-bold">
                        <label for="sendArea">請輸入送達地址:</label>
                        <select id="sendArea" class="form-select" aria-label="Default select example">
                            <option selected>市區</option>
                            <option value="臺北市">臺北市</option>
                            <option value="新北市">新北市</option>
                            <option value="桃園市">桃園市</option>
                            <option value="新竹市">新竹市</option>
                            <option value="臺中市">臺中市</option>
                            <option value="臺南市">臺南市</option>
                            <option value="高雄市">高雄市</option>
                            <option value="宜蘭縣">宜蘭縣</option>
                            <option value="苗栗縣">苗栗縣</option>
                            <option value="彰化縣">彰化縣</option>
                            <option value="南投縣">南投縣</option>
                            <option value="雲林縣">雲林縣</option>
                            <option value="嘉義縣">嘉義縣</option>
                            <option value="屏東縣">屏東縣</option>
                            <option value="花蓮縣">花蓮縣</option>
                            <option value="臺東縣">臺東縣</option>
                            <option value="澎湖縣">澎湖縣</option>
                        </select>
                        <input type="text" class="sendAddres form-control mt-3" id="exampleInputAddres" placeholder="地址">
                    </div>
                      <div class="box d-flex justify-content-between">
                          <button type="submit" class="Previous-Btn">上一步</button>
                          <button type="submit" class="sendout-Btn">完成</button>
                      </div>
                 </div>
            </form>
           
    </div>
    <script src="js/config.js"></script>
    <script src="https://unpkg.com/axios@1.1.2/dist/axios.min.js"></script>
    <script src="https://kit.fontawesome.com/790635f1cd.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js"
    integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz" crossorigin="anonymous"></script>
   <script src="js/reservation.js"></script>
   <script>
    //送出訂單
    const sendOut=document.querySelector('.sendout-Btn');
    sendOut.addEventListener('click',e=>{
        e.preventDefault();
        const customerMail=document.querySelector('.customerMail').value;
        const customerWeight=document.querySelector('.customerWeight').value;
        const customerItems=document.querySelector('.customerItems').value;
        const customerRemark=document.querySelector('.remark').value;
        const recipientName=document.querySelector('.recipientName').value;
        const recipientPhone=document.querySelector('.recipientPhone').value;
        const recipientMail=document.querySelector('.recipientMail').value;
        const deliveryDate=document.querySelector('.deliveryDate').value;
        const deliveryTime=document.querySelector('.deliveryTime').value;
        const pickupArea=document.getElementById('pickupArea').value;
        const pickupAddres=document.querySelector('.pickupAddres').value;
        const sendArea=document.getElementById('sendArea').value;
        const sendAddres=document.querySelector('.sendAddres').value;
        if(customerMail===''||customerWeight===''||customerItems===''||customerRemark===''||
           recipientName===''||recipientPhone===''||recipientMail===''||deliveryDate===''||
           deliveryTime===''||pickupArea===''||pickupAddres===''||sendArea===''||sendAddres==='' ){
            alert('資訊不完整請重新輸入');
            return;
        }
         axios.post(`${_url}/600/shops`,{
            "userId":id,
            "demand":"出貨",
            "customerName":userName,
            "customerMail":customerMail,
            "customerWeight":customerWeight,
            "customerItems":customerItems,
            "customerRemark":customerRemark,
            "recipientName":recipientName,
            "recipientPhone":recipientPhone,
            "recipientMail":recipientMail,
            "deliveryDate":deliveryDate,
            "deliveryTime":deliveryTime,
            "pickupArea":pickupArea,
            "pickupAddres":pickupAddres,
            "sendArea":sendArea,
            "sendAddres":sendAddres
         },{
            headers: {
              'Content-Type':'application/json',
              'Authorization': 'Bearer '+token  
               }

         })
         .then(res=>{
            console.log(res); 
            window.location.replace('http://127.0.0.1:5501/afterlogin.html');
         })
         .catch(err=>{
             console.log(err)
         })
  
    })
   </script>
</body>
</html>